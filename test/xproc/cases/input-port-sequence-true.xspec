<?xml version="1.0" encoding="UTF-8"?>
<x:description xmlns:s="x-urn:test:xproc:steplibrary"
    xmlns:x="http://www.jenitennison.com/xslt/xspec" xproc="library.xpl">
    <x:scenario label="Empty input">
        <x:call step="s:input-port-sequence-true">
            <x:input port="source" select="()"/>
        </x:call>
        <x:expect label="The step counted 0 input documents" port="xproc-result"
            test="$x:result => number()" select="0"/>
    </x:scenario>
    <x:scenario label="One input document">
        <x:call step="s:input-port-sequence-true">
            <x:input port="source">
                <document/>
            </x:input>
        </x:call>
        <x:expect label="The step counted 1 input document" port="xproc-result"
            test="$x:result => number()" select="1"/>
    </x:scenario>
    <x:scenario label="Two identical input documents">
        <x:call step="s:input-port-sequence-true">
            <x:input port="source" select="(/,/)">
                <document/>
            </x:input>
        </x:call>
        <x:expect label="The step counted 2 input documents" port="xproc-result"
            test="$x:result => number()" select="2"/>
    </x:scenario>
    <x:scenario label="Two distinct input documents">
        <x:call step="s:input-port-sequence-true">
            <x:input port="source" select="('document.xml', 'document-xhtml.html')
                ! resolve-uri(., $x:xspec-uri)
                ! doc(.)">
                <document/>
            </x:input>
        </x:call>
        <x:expect label="The step counted 2 input documents" port="xproc-result"
            test="$x:result => number()" select="2"/>
    </x:scenario>
    <x:scenario>
        <x:label>Two distinct XML input documents, embedded in x:input
            (XML Calabash wraps each element separately in a document node)</x:label>
        <x:call step="s:input-port-sequence-true">
            <x:input port="source">
                <document1/>
                <document2/>
            </x:input>
        </x:call>
        <x:expect label="The step counted 2 input documents" port="xproc-result"
            test="$x:result => number()" select="2"/>
    </x:scenario>
    <x:scenario>
        <x:label>Note: Adjacent text nodes embedded in x:input get merged</x:label>
        <x:call step="s:input-port-sequence-true">
            <x:input port="source">
                <x:text>text1</x:text>
                <x:text>text2</x:text>
            </x:input>
        </x:call>
        <x:expect label="The step counted 1 input document" port="xproc-result"
            test="$x:result => number()" select="1"/>
    </x:scenario>
</x:description>
